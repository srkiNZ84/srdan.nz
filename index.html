<html>
  <head>
    <title>Srdan Geek NZ</title>
    <script>
      function updateResults(){
        console.log("Updating results paragraph");
        var userText = document.getElementById("myTextBox").value;
        //document.getElementById("myResultsBox").innerHTML = "Here it is: " + userText;
        var myData = { "document": userText };
        var request = new XMLHttpRequest();
        var postURL = "https://us-central1-faas-helloworld.cloudfunctions.net/pyhttp";
        request.open('POST', postURL, true);
        request.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        request.onreadystatechange = function() {//Call a function when the state changes.
          if(request.readyState == 4 && request.status == 200) {
            alert(request.responseText);
          }
        }
        request.send(myData);
      }
    </script>
  </head>
  <body>
    <p>Content:</p>
    <br />
    <textarea id="myTextBox" rows="5" columns="30" >
    </textarea>
    <br />
    <button onclick="updateResults()" type="button">Save data</button>
    <br />
    <p id="myResultsBox"></p>
  </body>
</html>

